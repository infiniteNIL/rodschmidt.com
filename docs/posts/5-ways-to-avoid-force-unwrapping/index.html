<!DOCTYPE html>
<html lang="en-us">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.68.3" />

    
    
    

<title>5 Ways to Avoid Force Unwrapping • Rod Schmidt</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="5 Ways to Avoid Force Unwrapping"/>
<meta name="twitter:description" content="Someone on the reddit iOS Programming group asked “What are the mistakes generally done by iOS developers while coding in Swift?”A lot of comments were about using force unwrapping on optionals. Comments such as:
 Force unwrapping everything Using pyramids of if-let as opposed to guard statements var firstName: String! ugh Overuse of force unwrapped optionals. I cringe when I see that especially when a simple one-liner guard statement would make the code a ton safer."/>

<meta property="og:title" content="5 Ways to Avoid Force Unwrapping" />
<meta property="og:description" content="Someone on the reddit iOS Programming group asked “What are the mistakes generally done by iOS developers while coding in Swift?”A lot of comments were about using force unwrapping on optionals. Comments such as:
 Force unwrapping everything Using pyramids of if-let as opposed to guard statements var firstName: String! ugh Overuse of force unwrapped optionals. I cringe when I see that especially when a simple one-liner guard statement would make the code a ton safer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://infinitenil.github.io/rodschmidt.com/posts/5-ways-to-avoid-force-unwrapping/" />
<meta property="article:published_time" content="2016-11-16T18:02:53+00:00" />
<meta property="article:modified_time" content="2016-11-16T18:02:53+00:00" />


    






<link rel="stylesheet" href="https://infinitenil.github.io/rodschmidt.com/scss/hyde-hyde.3081c4981fb69a2783dd36ecfdd0e6ba7a158d4cbfdd290ebce8f78ba0469fc6.css" integrity="sha256-MIHEmB&#43;2mieD3Tbs/dDmunoVjUy/3SkOvOj3i6BGn8Y=">


<link rel="stylesheet" href="https://infinitenil.github.io/rodschmidt.com/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://infinitenil.github.io/rodschmidt.com/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="https://infinitenil.github.io/rodschmidt.com/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://infinitenil.github.io/rodschmidt.com/">Rod Schmidt</a>
      </span>
      
      
        <div class="author-image">
          <img src="https://www.gravatar.com/avatar/e72ca1d6149c220065acbb01cd9f5d01?s=240&d=mp" class="img--circle img--headshot element--center" alt="gravatar">
        </div>
      
      <p class="site__description">
         Thoughts on Software Development 
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Rod Schmidt</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="https://infinitenil.github.io/rodschmidt.com/about/">
						<span>About</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://infinitenil.github.io/rodschmidt.com/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="https://infinitenil.github.io/rodschmidt.com/tags/">
						<span>Tags</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/rodschmidt" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/infinitenil" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/rodschmidt" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	<a href="https://stackoverflow.com/users/117435" rel="me"><i class="fab fa-stack-overflow fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2020 Rod Schmidt
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>5 Ways to Avoid Force Unwrapping</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Nov 16, 2016
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="https://infinitenil.github.io/rodschmidt.com/tags/swift">swift</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 3 min read
</div>


  </header>
  
  
  <div class="post">
    <p>Someone on the reddit iOS Programming group asked <a href="https://www.reddit.com/r/iOSProgramming/comments/5bm9j7/what_are_the_mistakes_generally_done_by_ios/">“What are the mistakes generally done by iOS developers while coding in Swift?”</a>A lot of comments were about using force unwrapping on optionals. Comments such as:</p>
<ul>
<li>Force unwrapping everything</li>
<li>Using pyramids of if-let as opposed to guard statements</li>
<li><code>var firstName: String!</code> ugh</li>
<li>Overuse of force unwrapped optionals. I cringe when I see that especially when a simple one-liner guard statement would make the code a ton safer.</li>
</ul>
<p>So, I thought I would address these concerns and list 5 ways you can avoid force unwrapping.</p>
<h2 id="1-guard">1. Guard</h2>
<p>To set this up, let’s say we have a function called <code>fullName</code> that takes a first name, optional middle name, and last name and returns a string for the full name.</p>
<p>So <code>fullName(first: &quot;Rod&quot;, middle: nil, last: &quot;Schmidt&quot;)</code> results in “Rod Schmidt”</p>
<p>With force unwrapping this might look like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fullName</span>(first: String, middle: String?, last: String) -&gt; String? {
   <span style="color:#66d9ef">if</span> middle <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
       <span style="color:#66d9ef">return</span>  first <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> middle! <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> last 
   } <span style="color:#66d9ef">else</span> {
       <span style="color:#66d9ef">return</span> first <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> last
   }
} 
</code></pre></div><p>One way to avoid the force unwrapping is with a guard, like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fullName</span>(first: String, middle: String?, last: String) -&gt; String? {
    <span style="color:#66d9ef">guard</span> <span style="color:#66d9ef">let</span> middle = middle <span style="color:#66d9ef">else</span> { <span style="color:#66d9ef">return</span> first <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> last }
    <span style="color:#66d9ef">return</span>  first <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> middle <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> last 
} 
</code></pre></div><h2 id="2-if-let">2. If Let</h2>
<p>Taking the same example above, we could use an if-let statement instead:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fullName</span>(first: String, middle: String?, last: String) -&gt; String? {
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> middle = middle {
        <span style="color:#66d9ef">return</span>  first <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> middle <span style="color:#f92672">+</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#960050;background-color:#1e0010">“</span> <span style="color:#f92672">+</span> last 
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> first <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> last
    }
} 
</code></pre></div><h2 id="3-let-with-1st-assignment">3. Let With 1st Assignment</h2>
<p>This one is not widely known or used. Did you know you can declare a let without assigning to it? As long as you assign something to it before it is used, you can do this. Here’s a rather contrived derivation of our example above that adds a title to the name based on whether or not the first and middle name are provided:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fullName</span>(first: String?, middle: String?, last: String) -&gt; String? {
    <span style="color:#66d9ef">let</span> title: String
    
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> first = first, <span style="color:#66d9ef">let</span> middle = middle {
        title = <span style="color:#e6db74">&#34;M.&#34;</span>
        <span style="color:#66d9ef">return</span> title <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> first <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> middle <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> last
    } <span style="color:#66d9ef">else</span> {
        title = <span style="color:#e6db74">&#34;X.&#34;</span>
        <span style="color:#66d9ef">return</span>  title <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> last 
    }
} 
</code></pre></div><p>Also notice the multiple lets in the if-let statement instead of nesting them.</p>
<h2 id="4-nil-coalescing-operator-">4. Nil Coalescing Operator (??)</h2>
<p>I like this one a lot. It’s a way to provide a default value if an optional variable is nil. Taking our first example above, we could do something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fullName</span>(first: String, middle: String?, last: String) -&gt; String? {
   <span style="color:#66d9ef">return</span>  first <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> (middle ?? <span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; &#34;</span> <span style="color:#f92672">+</span> last 
} 
</code></pre></div><p>We just concatenate an empty string if middle is nil.</p>
<h2 id="5-optional-chaining">5. Optional Chaining</h2>
<p>This comes into play quite often when doing UIKit stuff. Say you have a delegate that you know will be set by a XIB or storyboard when it’s loaded. So you may have a delegate declared like this: <code>var weak delegate: MyDelegate!</code></p>
<p>When a button is pressed, you need to tell the delegate. Instead of using the implicitly forced unwrapping you can do this: <code>delegate?.buttonWasPressed(self)</code></p>
<p>Then delegate will only be called if it is not nil. Normally, your delegate is quite possibly nil and you always want to do this, but I’ve seen code like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">if</span> delegate <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
   delegate!.buttonWasPressed(<span style="color:#66d9ef">self</span>)
} 
</code></pre></div><p>Totally unnecessary and verbose. Just use optional chaining.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="https://infinitenil.github.io/rodschmidt.com/posts/do-you-find-the-whole-planning-process-painful/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Do You Find The Whole Planning Process Painful?</span>
    </a>
    
    
    <a href="https://infinitenil.github.io/rodschmidt.com/posts/model-view-controller-problems-and-solutions/" class="navigation-next">
      <span class="navigation-tittle">Model View Controller: Problems and Solutions</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <div id="disqus_thread"></div>
<script type="text/javascript">
    

    (function () {
    if (location.hostname === "localhost" ||
      location.hostname === "127.0.0.1" ||
      location.hostname === "") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    var disqus_shortname = 'infinitenil';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || 
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<noscript>
  Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by
  <span class="logo-disqus">Disqus</span>
</a>

    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>


    
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
